<div class="game-screen">
  <div class="game-screen-layout">
    <div class="game-view">
      <div class="game-tile" data-bind="css: { 'wall-top': tile00().top === 'TILE_WALL', 'wall-bottom': tile00().bottom === 'TILE_WALL', 'wall-right': tile00().right === 'TILE_WALL', 'wall-left': tile00().left === 'TILE_WALL' }"><!-- ko if: tile00().containsItems?.length > 0 --><img data-bind="attr: { src: '/assets/' + tile00().containsItems[0].key.toLowerCase() + '.png' }"><!-- /ko --></div>
      <div class="game-tile" data-bind="css: { 'wall-top': tile01().top === 'TILE_WALL', 'wall-bottom': tile01().bottom === 'TILE_WALL', 'wall-right': tile01().right === 'TILE_WALL', 'wall-left': tile01().left === 'TILE_WALL' }"><!-- ko if: tile01().containsItems?.length > 0 --><img data-bind="attr: { src: '/assets/' + tile01().containsItems[0].key.toLowerCase() + '.png' }"><!-- /ko --></div>
      <div class="game-tile" data-bind="css: { 'wall-top': tile02().top === 'TILE_WALL', 'wall-bottom': tile02().bottom === 'TILE_WALL', 'wall-right': tile02().right === 'TILE_WALL', 'wall-left': tile02().left === 'TILE_WALL' }"><!-- ko if: tile02().containsItems?.length > 0 --><img data-bind="attr: { src: '/assets/' + tile02().containsItems[0].key.toLowerCase() + '.png' }"><!-- /ko --></div>
      <div class="game-tile" data-bind="css: { 'wall-top': tile10().top === 'TILE_WALL', 'wall-bottom': tile10().bottom === 'TILE_WALL', 'wall-right': tile10().right === 'TILE_WALL', 'wall-left': tile10().left === 'TILE_WALL' }"><!-- ko if: tile10().containsItems?.length > 0 --><img data-bind="attr: { src: '/assets/' + tile10().containsItems[0].key.toLowerCase() + '.png' }"><!-- /ko --></div>
      <div class="game-tile" data-bind="css: { 'wall-top': tile11().top === 'TILE_WALL', 'wall-bottom': tile11().bottom === 'TILE_WALL', 'wall-right': tile11().right === 'TILE_WALL', 'wall-left': tile11().left === 'TILE_WALL' }"><img src="/assets/character.png"></div>
      <div class="game-tile" data-bind="css: { 'wall-top': tile12().top === 'TILE_WALL', 'wall-bottom': tile12().bottom === 'TILE_WALL', 'wall-right': tile12().right === 'TILE_WALL', 'wall-left': tile12().left === 'TILE_WALL' }"><!-- ko if: tile12().containsItems?.length > 0 --><img data-bind="attr: { src: '/assets/' + tile12().containsItems[0].key.toLowerCase() + '.png' }"><!-- /ko --></div>
      <div class="game-tile" data-bind="css: { 'wall-top': tile20().top === 'TILE_WALL', 'wall-bottom': tile20().bottom === 'TILE_WALL', 'wall-right': tile20().right === 'TILE_WALL', 'wall-left': tile20().left === 'TILE_WALL' }"><!-- ko if: tile20().containsItems?.length > 0 --><img data-bind="attr: { src: '/assets/' + tile20().containsItems[0].key.toLowerCase() + '.png' }"><!-- /ko --></div>
      <div class="game-tile" data-bind="css: { 'wall-top': tile21().top === 'TILE_WALL', 'wall-bottom': tile21().bottom === 'TILE_WALL', 'wall-right': tile21().right === 'TILE_WALL', 'wall-left': tile21().left === 'TILE_WALL' }"><!-- ko if: tile21().containsItems?.length > 0 --><img data-bind="attr: { src: '/assets/' + tile21().containsItems[0].key.toLowerCase() + '.png' }"><!-- /ko --></div>
      <div class="game-tile" data-bind="css: { 'wall-top': tile22().top === 'TILE_WALL', 'wall-bottom': tile22().bottom === 'TILE_WALL', 'wall-right': tile22().right === 'TILE_WALL', 'wall-left': tile22().left === 'TILE_WALL' }"><!-- ko if: tile22().containsItems?.length > 0 --><img data-bind="attr: { src: '/assets/' + tile22().containsItems[0].key.toLowerCase() + '.png' }"><!-- /ko --></div>
    </div>
    <div class="game-feedback">You see a neutral orc.</div>
    <div class="game-stats">&lt;Map&gt;</div>
    <div class="game-stats"><strong>Spells on</strong>
      <ul>
        <!-- ko foreach: activeSpells -->
         <li data-bind="text: label + '(' + remaining + ')'"></li>
        <!-- /ko -->
      </ul>
    </div>
    <div class="game-actions">
      <div class="game-hits" data-bind="text: maxHits() + '/' + curHits() + ' HITS left.'"></div>
      <!-- ko foreach: actions -->
        <div class="game-action" data-bind="
          text: label,
          click: $parent.onActionItemClick.bind($parent, key, payload)
        "></div>
      <!-- /ko -->
    </div>
    <div class="game-stats">
      <strong>Characteristics</strong>
      <table>
        <tr>
          <td>Strength</td>
          <td data-bind="text: characterStrength"></td>
        </tr>
        <tr>
          <td>Intelligence</td>
          <td data-bind="text: characterIntelligence"></td>
        </tr>
        <tr>
          <td>Constitution</td>
          <td data-bind="text: characterConstitution"></td>
        </tr>
        <tr>
          <td>Dexterity</td>
          <td data-bind="text: characterDexterity"></td>
        </tr>
      </table>
      <br />
      <strong>Equipment</strong>
      <table>
        <tr>
          <td>Sword</td>
          <td data-bind="text: equipmentSword"></td>
        </tr>
        <tr>
          <td>Shield</td>
          <td data-bind="text: equipmentShield"></td>
        </tr>
        <tr>
          <td>Armor</td>
          <td data-bind="text: equipmentArmor"></td>
        </tr>
        <tr>
          <td>Arrows</td>
          <td data-bind="text: equipmentArrows"></td>
        </tr>
      </table>
    </div>
    <div class="game-stats">
      <strong>Statistics</strong>
      <table>
        <tr>
          <td>Experience</td>
          <td data-bind="text: statisticsExperience"></td>
        </tr>
        <tr>
          <td>Money</td>
          <td data-bind="text: statisticsMoney"></td>
        </tr>
        <tr>
          <td>Next Level</td>
          <td data-bind="text: statisticsNextLevelInXp"></td>
        </tr>
        <tr>
          <td>XP from kills</td>
          <td data-bind="text: statisticsXpPercentageFromKills() + '%'"></td>
        </tr>
        <tr>
          <td>Weight</td>
          <td data-bind="text: statisticsWeight"></td>
        </tr>
        <tr>
          <td>Player level</td>
          <td data-bind="text: statisticsPlayerLevel"></td>
        </tr>
        <tr>
          <td>Spell units</td>
          <td data-bind="text: statisticsSpellUnitsCur() + '/' + statisticsSpellUnitsMax()"></td>
        </tr>
      </table>
    </div>
  </div>
  <div class="game-screen-chat">
    <game-chat params="{
        members: chatMembers,
        messages: chatMessages,
        toPoll: onChatPoll,
        toSendMessage: onSendChatMessage,
        playerName: playerName
    }">
    </game-chat>
  </div>
</div>
<!-- ko if: hasPlayerWon() && shouldOpenWinDialog() -->
<div class="popup-overlay">
  <div class="popup">
    <div class="popup-title">
      You won!
    </div>
    <div class="popup-message">
      Against all perils of the dungeon, you have emerged victorious! The Orb, long hidden in the depths, is now safely in your hands. Legends will speak of your bravery for ages to come!
    </div>
    <div class="popup-actions">
      <button data-bind="click: closeWinDialog">OK</button>
    </div>
  </div>
</div>
<!-- /ko -->